"use strict";angular.module("SC-app-blog",["angularUtils.directives.dirDisqus","SC-app-utils","SC-app-content-components"]),angular.module("SC-app-blog").controller("BlogListCtrl",["$rootScope","$scope","blogFactory","utilitiesFactory",function(a,b,c,d){c.getBlogList(function(a){b.blogItems=a.list},d.genericHTTPCallbackError)}]),angular.module("SC-app-blog").controller("BlogSingleCtrl",["$rootScope","$scope","$stateParams","$location","blogFactory","utilitiesFactory","appConfig",function(a,b,c,d,e,f,g){b.disqus={blogLoaded:!1},e.getBlogSingle(c.blogAlias,function(a){b.blogPost=a;var c=g.disqus_shortname,e=d.host();0===e.indexOf("dev")?b.disqus.shortname="dev"+c:0===e.indexOf("staging")?b.disqus.shortname="staging"+c:e===g.hostName&&(b.disqus.shortname=c),b.disqus.identifier=a.nid,b.disqus.url=d.absUrl(),b.disqus.title=a.title,b.disqus.blogLoaded=!0},f.genericHTTPCallbackError)}]),angular.module("SC-app-blog").directive("scBlogSimplePager",function(){return{restrict:"A",replace:!0,scope:{previousBlogPost:"=previousBlogPost",nextBlogPost:"="},templateUrl:"bower_components/SC-app-blog/release/blogSimplePagerView.html"}}),angular.module("SC-app-blog").factory("blogFactory",["$http","$rootScope","utilitiesFactory","appConfig",function(a,b,c,d){return{getBlogSingle:function(b,d,e){a.get("/json/api/blog-post/"+b).success(function(a){a.field_published_date&&(a.field_published_date=c.timestampSecondsToMS(a.field_published_date)),d(a)}).error(e)},getBlogList:function(b,e){var f="/json/node.json?type=blog_post&status=1&sort=field_published_date&direction=DESC";d.festivalId&&(f=f+"&field_festival="+d.festivalId),a.get(f).success(function(a){angular.forEach(a.list,function(a){a.field_published_date&&(a.field_published_date=c.timestampSecondsToMS(a.field_published_date))}),b(a)}).error(e)}}}]);