"use strict";angular.module("SC-app-blog",["angularUtils.directives.dirDisqus","SC-app-utils","SC-app-content-components"]),angular.module("SC-app-blog").controller("BlogListCtrl",["$rootScope","$scope","blogFactory","utilitiesFactory",function(a,b,c,d){c.getBlogList(function(a){b.blogItems=a.list},d.genericHTTPCallbackError)}]),angular.module("SC-app-blog").controller("BlogSingleCtrl",["$rootScope","$scope","$stateParams","$location","blogFactory","utilitiesFactory",function(a,b,c,d,e,f){b.disqus={blogLoaded:!1},e.getBlogSingle(c.blogAlias,function(c){b.blogPost=c;var e=a.disqus_shortname,f=d.host();0===f.indexOf("dev")?b.disqus.shortname="dev"+e:0===f.indexOf("staging")?b.disqus.shortname="staging"+e:f===a.hostName&&(b.disqus.shortname=e),b.disqus.identifier=c.nid,b.disqus.url=d.absUrl(),b.disqus.title=c.title,b.disqus.blogLoaded=!0},f.genericHTTPCallbackError)}]),angular.module("SC-app-blog").factory("blogFactory",["$http","$rootScope","utilitiesFactory","appConfig",function(a,b,c,d){return{getBlogSingle:function(b,d,e){a.get("/json/api/blog-post/"+b).success(function(a){a.field_published_date&&(a.field_published_date=c.timestampSecondsToMS(a.field_published_date)),d(a)}).error(e)},getBlogList:function(b,e){var f="/json/node.json?type=blog_post&status=1&sort=field_published_date&direction=DESC";d.festivalId&&(f=f+"&field_festival="+d.festivalId),a.get(f).success(function(a){angular.forEach(a.list,function(a){a.field_published_date&&(a.field_published_date=c.timestampSecondsToMS(a.field_published_date))}),b(a)}).error(e)}}}]);